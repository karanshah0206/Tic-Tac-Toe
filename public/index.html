<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="author" content="Karan Shah">
    <meta name="description" content="A Real-Time Cross and Nuts Game For Nodes Connected Within A Network.">
    <meta name="keywords" content="Game, Cross and Nuts, XO, Tic Tac Toe, NodeJS, SocketIO">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross & Nuts</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>
<body>
    <div id="namegetter">
        <div id="form">
            <input type="text" id="nameTxt" placeholder="Enter Your Name">
            <button id="nameBtn">OK</button>
        </div>
        <p id="informer" class="hider">Waiting For Another Player<img src="img/Radio-1s-37px.gif"></p>
    </div>
    <table id="gamespot" class="hider">
        <tr>
            <td id="r1c1" onclick="r1c1();"></td>
            <td onclick="r1c2();" style="border-left: 1px solid black; border-right: 1px solid black;"></td>
            <td onclick="r1c3();"></td>
        </tr>
        <tr>
            <td onclick="r2c1();" style="border-top: 1px solid black; border-bottom: 1px solid black;"></td>
            <td onclick="r2c2();" style="border: 1px solid black;"></td>
            <td onclick="r2c3();" style="border-top: 1px solid black; border-bottom: 1px solid black;"></td>
        </tr>
        <tr>
            <td onclick="r3c1();"></td>
            <td onclick="r3c2();" style="border-left: 1px solid black; border-right: 1px solid black;"></td>
            <td onclick="r3c3();"></td>
        </tr>
    </table>
    <p id="disclaim"></p>
    <footer>
        Made with ‚ù§ in Pune. Copyright &copy; <span id="getyear"></span> <a href="https://www.github.com/karanshah0206" target="_blank">Karan Shah</a>.
    </footer>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script>
        var socket = io();
        var dt = new Date();
    
        document.getElementById("getyear").innerText = dt.getFullYear();
        document.getElementById("nameBtn").addEventListener('click', e => {
            if(document.getElementById("nameTxt").value != "") {
                socket.emit('readyMsg', (document.getElementById("nameTxt").value));
                document.getElementById("nameTxt").style.border = "1px solid white";
                document.getElementById("informer").classList.remove("hider");
                document.getElementById("nameBtn").style.pointerEvents = "none";
                document.getElementById("nameBtn").style.userSelect = "none";
                document.getElementById("nameBtn").style.opacity = "0.5";
            } else {
                document.getElementById("nameTxt").style.border = "1px solid red";
            }
        });
        socket.on('go', (playerData) => {
            document.getElementById("namegetter").classList.add("hider");
            document.getElementById("gamespot").classList.remove("hider");
            document.getElementById("disclaim").innerText = "Players Online: " + playerData.pl1 + " & " + playerData.pl2 + ".";
        });
        socket.on('latecomer', () => {
            window.location="./late.html";
        });
        socket.on('disconnected', () => {
            socket.emit('disconMsg');
            window.location = "./disconnection.html";
            socket.disconnect();
        })
    </script>
</body>
</html>